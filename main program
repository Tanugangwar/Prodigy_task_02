from PIL import Image
import numpy as np

def encrypt_image(input_path, output_path, key=123):
    img = Image.open(input_path)
    img_array = np.array(img)
    encrypted_array = img_array ^ key
    encrypted_img = Image.fromarray(encrypted_array.astype(np.uint8))
    encrypted_img.save(output_path)
    print(f"Encrypted image saved to {output_path}")

def decrypt_image(input_path, output_path, key=123):
    img = Image.open(input_path)
    img_array = np.array(img)
    decrypted_array = img_array ^ key
    decrypted_img = Image.fromarray(decrypted_array.astype(np.uint8))
    decrypted_img.save(output_path)
    print(f"Decrypted image saved to {output_path}")

if __name__ == "__main__":
    import os

    print("1. Encrypt Image\n2. Decrypt Image")
    choice = input("Choose an option (1/2): ")

    if choice == '1':
        encrypt_image("Screenshot 2025-07-28 221223.png", "encrypted_image.png")
    elif choice == '2':
        decrypt_image("encrypted_image.png", "decrypted_image.png")
    else:
        print("Invalid choice")
